<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Haihao Sun">





<title>Leetcode_121_Best_Time_For_Stock | Haihao Sun&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Haihao&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Haihao&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Leetcode_121_Best_Time_For_Stock</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Haihao Sun</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">July 7, 2020&nbsp;&nbsp;20:39:06</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Data-Structure/">Data Structure</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <img src="https://4.bp.blogspot.com/-ubo1sASnZl0/WejaJK9hSHI/AAAAAAAAepM/PLLivmryMncahKGWv3mGbbhFK2rBeFIjQCLcBGAs/s1600/Combusken.png" style="width:200px;">

<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">122. Best Time to Buy and Sell Stock II</a></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123. Best Time to Buy and Sell Stock III</a></p>
<h1>3 Problems with 1 Follow-up</h1>

<h2 id="Problem-Description-121-Best-Time-to-Buy-and-Sell-Stock-I"><a href="#Problem-Description-121-Best-Time-to-Buy-and-Sell-Stock-I" class="headerlink" title="Problem Description 121. Best Time to Buy and Sell Stock I"></a>Problem Description <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></h2><p>
Say you have an array for which the ith element is the price of a given stock on day i.

<p>If you were only permitted to complete at most one transaction (i.e., buy one and sell one share of the stock), design an algorithm to find the maximum profit.</p>
<p>Note that you cannot sell a stock before you buy one.</p>
</p>

<p>Example1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: [7,1,5,3,6,4]</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: Buy on day 2 (price &#x3D; 1) and sell on day 5 (price &#x3D; 6), profit &#x3D; 6-1 &#x3D; 5.</span><br><span class="line">             Not 7-1 &#x3D; 6, as selling price needs to be larger than buying price.</span><br></pre></td></tr></table></figure>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h2 id="Problem-Discussion-121-Best-Time-to-Buy-and-Sell-Stock-I"><a href="#Problem-Discussion-121-Best-Time-to-Buy-and-Sell-Stock-I" class="headerlink" title="Problem Discussion: 121. Best Time to Buy and Sell Stock I"></a>Problem Discussion: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></h2><h3 id="category-Data-Structure-Array-gt-fire-pokemon"><a href="#category-Data-Structure-Array-gt-fire-pokemon" class="headerlink" title="category: Data Structure(Array) -&gt; fire pokemon"></a>category: Data Structure(Array) -&gt; fire pokemon</h3><h3 id="Intuition"><a href="#Intuition" class="headerlink" title="Intuition:"></a>Intuition:</h3><p>
To be honest, this problem is not too hard to solve with the knowledge of programming. Since we are allowed to do only 1 transaction, the most intuitive solution is to do a nested for loop, we set the variable i as the first day for buying the stock, and the second variable j as the second day for selling the stock. Therefore, the runtime for this algorithm is O(n^2). However, can we do better?
</p>


<h3 id="Improvement-I"><a href="#Improvement-I" class="headerlink" title="Improvement I:"></a>Improvement I:</h3><p>Is O(n^2) enough for this problem? No! We can definitely do better and solve this problem in O(n). If we take a step back, we are really finding the max difference between the two numbers in the array. Everytime we visit a new number in the array, we can update two things:

<br>
1. The new number can be a candidate for selling stock.
2. the new number might be a candidate for purchasing stock.

</p>
<p>
Therefore, we can do this in 1-pass, and update the result and current_min respectively to find the answer. (Actually, we are using a bit greedy here)
</p>

<h2 id="Problem-Solution-121-Best-Time-to-Buy-and-Sell-Stock-I"><a href="#Problem-Solution-121-Best-Time-to-Buy-and-Sell-Stock-I" class="headerlink" title="Problem Solution: 121. Best Time to Buy and Sell Stock I"></a>Problem Solution: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, cur_min = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cur_min = prices[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// just to remember the current min, and keep update this variable</span></span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                cur_min = min(cur_min, prices[i]);</span><br><span class="line">                ret = max(prices[i] - cur_min, ret);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>




<h2 id="Problem-Description-122-Best-Time-to-Buy-and-Sell-Stock-II"><a href="#Problem-Description-122-Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="Problem Description 122. Best Time to Buy and Sell Stock II"></a>Problem Description <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">122. Best Time to Buy and Sell Stock II</a></h2><p>
Say you have an array prices for which the ith element is the price of a given stock on day i.

<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (i.e., buy one and sell one share of the stock multiple times).</p>
<p>Note: You may not engage in multiple transactions at the same time (i.e., you must sell the stock before you buy again).</p>
</p>

<p>Example1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: [7,1,5,3,6,4]</span><br><span class="line">Output: 7</span><br><span class="line">Explanation: Buy on day 2 (price &#x3D; 1) and sell on day 3 (price &#x3D; 5), profit &#x3D; 5-1 &#x3D; 4.</span><br><span class="line">             Then buy on day 4 (price &#x3D; 3) and sell on day 5 (price &#x3D; 6), profit &#x3D; 6-3 &#x3D; 3.</span><br></pre></td></tr></table></figure>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h2 id="Problem-Discussion-122-Best-Time-to-Buy-and-Sell-Stock-II"><a href="#Problem-Discussion-122-Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="Problem Discussion: 122. Best Time to Buy and Sell Stock II"></a>Problem Discussion: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">122. Best Time to Buy and Sell Stock II</a></h2><h3 id="category-Data-Structure-Array-gt-fire-pokemon-1"><a href="#category-Data-Structure-Array-gt-fire-pokemon-1" class="headerlink" title="category: Data Structure(Array) -&gt; fire pokemon"></a>category: Data Structure(Array) -&gt; fire pokemon</h3><h3 id="Intuition-1"><a href="#Intuition-1" class="headerlink" title="Intuition:"></a>Intuition:</h3><p>
The problem description is similar to the version-1 of the buying the selling stock, with the major difference is that we can do multiple time of transactions in this problem. While this seems intermidating at the first time, if we draw the line chart of the graph, we are able to observe that this problem is asking the sum of possible increases. In other words, as long as there is an increase, we can take it! 
</p>


<h2 id="Problem-Solution-122-Best-Time-to-Buy-and-Sell-Stock-II"><a href="#Problem-Solution-122-Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="Problem Solution: 122. Best Time to Buy and Sell Stock II"></a>Problem Solution: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/" target="_blank" rel="noopener">122. Best Time to Buy and Sell Stock II</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> cur_price = <span class="number">0</span>, ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.size(); i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">                cur_price = prices[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// if the prices[i] is bigger than what I have, I do the transcation today</span></span><br><span class="line">                <span class="comment">// I always assume that I buy the yesterday's stock</span></span><br><span class="line">                <span class="keyword">if</span>(prices[i] &gt; cur_price)&#123;</span><br><span class="line">                    ret += (prices[i] - cur_price);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// if the prices[i] is smaller than what I have, I claim that I did not buy </span></span><br><span class="line">                <span class="comment">// the stock yesterday, and buy the stock today</span></span><br><span class="line">                cur_price = prices[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>








<h2 id="Problem-Discussion-121-Best-Time-to-Buy-and-Sell-Stock-I-1"><a href="#Problem-Discussion-121-Best-Time-to-Buy-and-Sell-Stock-I-1" class="headerlink" title="Problem Discussion: 121. Best Time to Buy and Sell Stock I"></a>Problem Discussion: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></h2><h3 id="category-Data-Structure-Array-gt-fire-pokemon-2"><a href="#category-Data-Structure-Array-gt-fire-pokemon-2" class="headerlink" title="category: Data Structure(Array) -&gt; fire pokemon"></a>category: Data Structure(Array) -&gt; fire pokemon</h3><h3 id="Intuition-2"><a href="#Intuition-2" class="headerlink" title="Intuition:"></a>Intuition:</h3><p>
To be honest, this problem is not too hard to solve with the knowledge of programming. Since we are allowed to do only 1 transaction, the most intuitive solution is to do a nested for loop, we set the variable i as the first day for buying the stock, and the second variable j as the second day for selling the stock. Therefore, the runtime for this algorithm is O(n^2). However, can we do better?
</p>


<h3 id="Improvement-I-1"><a href="#Improvement-I-1" class="headerlink" title="Improvement I:"></a>Improvement I:</h3><p>Is O(n^2) enough for this problem? No! We can definitely do better and solve this problem in O(n). If we take a step back, we are really finding the max difference between the two numbers in the array. Everytime we visit a new number in the array, we can update two things:

<br>
1. The new number can be a candidate for selling stock.
2. the new number might be a candidate for purchasing stock.

</p>
<p>
Therefore, we can do this in 1-pass, and update the result and current_min respectively to find the answer. (Actually, we are using a bit greedy here)
</p>

<h2 id="Problem-Solution-121-Best-Time-to-Buy-and-Sell-Stock-I-1"><a href="#Problem-Solution-121-Best-Time-to-Buy-and-Sell-Stock-I-1" class="headerlink" title="Problem Solution: 121. Best Time to Buy and Sell Stock I"></a>Problem Solution: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">121. Best Time to Buy and Sell Stock I</a></h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>, cur_min = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.size(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cur_min = prices[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// just to remember the current min, and keep update this variable</span></span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                cur_min = min(cur_min, prices[i]);</span><br><span class="line">                ret = max(prices[i] - cur_min, ret);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>




<h2 id="Problem-Description-123-Best-Time-to-Buy-and-Sell-Stock-III"><a href="#Problem-Description-123-Best-Time-to-Buy-and-Sell-Stock-III" class="headerlink" title="Problem Description 123. Best Time to Buy and Sell Stock III"></a>Problem Description <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123. Best Time to Buy and Sell Stock III</a></h2><p>
Say you have an array for which the ith element is the price of a given stock on day i.

<p>Design an algorithm to find the maximum profit. You may complete at most two transactions.</p>
<p>Note: You may not engage in multiple transactions at the same time (i.e., you must sell the stock before you buy again).</p>
</p>

<p>Example1:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: [3,3,5,0,0,3,1,4]</span><br><span class="line">Output: 6</span><br><span class="line">Explanation: Buy on day 4 (price &#x3D; 0) and sell on day 6 (price &#x3D; 3), profit &#x3D; 3-0 &#x3D; 3.</span><br><span class="line">             Then buy on day 7 (price &#x3D; 1) and sell on day 8 (price &#x3D; 4), profit &#x3D; 4-1 &#x3D; 3.</span><br></pre></td></tr></table></figure>



<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<h2 id="Problem-Discussion-123-Best-Time-to-Buy-and-Sell-Stock-III"><a href="#Problem-Discussion-123-Best-Time-to-Buy-and-Sell-Stock-III" class="headerlink" title="Problem Discussion: 123. Best Time to Buy and Sell Stock III"></a>Problem Discussion: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123. Best Time to Buy and Sell Stock III</a></h2><h3 id="category-Data-Structure-Array-gt-fire-pokemon-3"><a href="#category-Data-Structure-Array-gt-fire-pokemon-3" class="headerlink" title="category: Data Structure(Array) -&gt; fire pokemon"></a>category: Data Structure(Array) -&gt; fire pokemon</h3><h3 id="Intuition-3"><a href="#Intuition-3" class="headerlink" title="Intuition:"></a>Intuition:</h3><p>
Ths problem seems easier than the last time since we are allowed to do at most 2 transication instead of infinite number of transactions; however this is <b>not true!!!!!</b> What makes the last problem not hard was the fact that we can greedily pick all the possible increase in stock price, but for this time, we are not allowed to do so. Therefore, is there a way we can solve find the most profitable two transactions in this case? While the answer is clearly yes, it required efforts.
</p>


<h3 id="A-possible-O-n-2-solution-not-fast-enough-though"><a href="#A-possible-O-n-2-solution-not-fast-enough-though" class="headerlink" title="A possible O(n^2) solution, not fast enough though!"></a>A possible O(n^2) solution, not fast enough though!</h3><p>
Let us review the problem description for the first version <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/" target="_blank" rel="noopener">[121. Best Time to Buy and Sell Stock I]</a>. Clearly, we have an O(n) solution to find the best strategy for buying and selling stock for a specific array.
</p>

<p>
How to use the version-1 to solve this problem? Using the idea of divide and conquer, if we set a breakpoint among the the array and break the array into two parts, and we run the algorithm for <b>at most 1 transaction</b> for two subarrays, we are obtaining one possible solution, then we run the breakpoint for O(n) time, we are done. However, the runtime is O(n^2) which is not enough, so how do we do it better?
</p>


<h3 id="Improvement-and-another-potential-approach"><a href="#Improvement-and-another-potential-approach" class="headerlink" title="Improvement and another potential approach"></a>Improvement and another potential approach</h3><p>
If we can do at most 2 opeartions, and as we discuss before, we are able to break the array into two subarrays, then find the maximum result among them. However, every time we break the whole array into two parts, we need to call the subroutine twice, which is a waste of time!  
</p>

<p>
An observation that we can make is that for every subarray at the left, we are always solving the maximum profit starting at index 0, and for the subarray at the right, we are always solving the subarray ending at the index (arr.size()-1). What this means is that if we define array left_query, and for left_query[i] means the max profit for subarray starting at 0, and ending at index i. for the right_query, we define something similar.
<br>
We use memory to exchange for time here, O(n) for selecting all the possible breakpoints! 
</p>

<p>
Another possible follow-up question is that, what if the we allow at most k attemps of transactions instead of a fixed number 1 or 2? How should we do that? 
<BR>
Think about it, and we will discuss it tomorrow! 
</p>

<h2 id="Problem-Solution-123-Best-Time-to-Buy-and-Sell-Stock-III-O-n-beats-80"><a href="#Problem-Solution-123-Best-Time-to-Buy-and-Sell-Stock-III-O-n-beats-80" class="headerlink" title="Problem Solution: 123. Best Time to Buy and Sell Stock III O(n) beats 80%"></a>Problem Solution: <a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/" target="_blank" rel="noopener">123. Best Time to Buy and Sell Stock III</a> O(n) beats 80%</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = prices.size();</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">left_query</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">right_query</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> left_min = INT_MAX, left_ret = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            left_min = min(left_min, prices[i]);</span><br><span class="line">            left_ret = max(left_ret, prices[i] - left_min);</span><br><span class="line">            left_query[i] = left_ret;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> right_max = -INT_MAX, right_ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            right_max = max(right_max, prices[i]);</span><br><span class="line">            right_ret = max(right_ret, right_max - prices[i]);</span><br><span class="line">            right_query[i] = right_ret;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ret = max(ret, left_query[i] + right_query[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Haihao Sun</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://haihao-sun.github.io/2020/07/07/Leetcode-121-Best-Time-For-Stock/">http://haihao-sun.github.io/2020/07/07/Leetcode-121-Best-Time-For-Stock/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Trust the process.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/tech-Leetcode/"># tech-Leetcode</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2020/07/09/Leetcode-188-Best-Time-For-Stock/">Leetcode-188-Best-Time-For-Stock</a>
            
            
            <a class="next" rel="next" href="/2020/07/06/Leetcode-1339-Maximum-Product-of-Splitted-Binary-Tree/">Leetcode_1339_Maximum_Product_of_Splitted_Binary_Tree</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Haihao Sun | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
